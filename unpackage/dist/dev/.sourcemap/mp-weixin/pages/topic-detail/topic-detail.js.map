{"version":3,"sources":["webpack:///D:/uniapp/demo/main.js","webpack:///D:/uniapp/demo/pages/topic-detail/topic-detail.vue?a81c","webpack:///D:/uniapp/demo/pages/topic-detail/topic-detail.vue?9417","webpack:///D:/uniapp/demo/pages/topic-detail/topic-detail.vue?675b","webpack:///D:/uniapp/demo/pages/topic-detail/topic-detail.vue?6bd6","webpack:///D:/uniapp/demo/pages/topic-detail/topic-detail.vue"],"names":["createPage","Page","components","topicInfo","loadMore","swiperTabHead","commonList","data","tabIndex","tabBars","name","id","tablist","loadText","firstload","page","list","onReachBottom","onPullDownRefresh","getData","onLoad","e","__init","JSON","parse","detail","uni","$on","updateData","methods","obj","setNavigationBarTitle","title","getList","url","$http","get","token","err","res","errorCheck","arr","i","length","push","__format","concat","stopPullDownRefresh","item","userid","user","userPic","userpic","userName","username","isFollow","fens","type","titlePic","images","video","path","share","likeInfo","index","likeNum","ding_count","dislikeNum","cai_count","commentNum","comment_count","shareNum","sharenum","console","log","tabSwitch","updateGuanZhu","updateSupport","updateComment","forEach","find","value","post_id","infonum","do"],"mappings":"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","file":"pages/topic-detail/topic-detail.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/topic-detail/topic-detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./topic-detail.vue?vue&type=template&id=54a8ff50&\"\nvar renderjs\nimport script from \"./topic-detail.vue?vue&type=script&lang=js&\"\nexport * from \"./topic-detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('54a8ff50')) {\n      api.createRecord('54a8ff50', component.options)\n    } else {\n      api.reload('54a8ff50', component.options)\n    }\n    module.hot.accept(\"./topic-detail.vue?vue&type=template&id=54a8ff50&\", function () {\n      api.rerender('54a8ff50', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"uniapp/demo/pages/topic-detail/topic-detail.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./topic-detail.vue?vue&type=template&id=54a8ff50&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./topic-detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./topic-detail.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n    import loadMore from '../../components/common/load-more.vue';\n    import topicInfo from \"../../components/topic/topic-info.vue\";\n    import swiperTabHead from '../../components/index/swiper-tab-head.vue';\n    import commonList from \"../../components/common/common-list.vue\";\n\texport default {\n        components:{\n            topicInfo,\n            loadMore,\n            swiperTabHead,\n            commonList\n        },\n\t\tdata() {\n\t\t\treturn {\n                tabIndex:0,\n                tabBars:[\n                    {name:\"默认\",id:\"default\"      },\n                    {name:\"最新\",id:\"lastest\"      },              \n                ],\n                tablist:[\n                    //默认tab\n                    {\n                        loadText:\"上拉加载更多\",\n                        firstload:false,\n                        page:1,\n                        list:[]\n                    },\n                    //最新tab\n                    {\n                        loadText:\"上拉加载更多\",\n                        firstload:false,\n                        page:1,\n                        list:[]\n                    },\n                    \n                ],\n\t\t\t\ttopicInfo:{}\n\t\t\t}\n\t\t},\n        //监听上拉触底\n        onReachBottom() {\n            //上拉加载\n            this.loadMore();  \n        },\n        //监听下拉刷新\n        onPullDownRefresh() {\n            \n            this.getData();\n        },\n        onLoad(e) {\n            this.__init(JSON.parse(e.detail))\n            uni.$on('updateData',this.updateData)\n        },\n\t\tmethods: {\n        __init(obj){\n            this.topicInfo = obj;\n            uni.setNavigationBarTitle({\n                title:obj.title\n            });\n            // 获取列表数据\n            this.getList();\n        },\n            // 获取数据\n        async getList(){\n            let url = `topic/${this.topicInfo.id}/post/${this.tablist[this.tabIndex].page}`;\n            let [err,res] = await this.$http.get(url,{},{token:true});\n            // 错误处理\n            if (!this.$http.errorCheck(err,res)) {\n                return this.tablist[this.tabIndex].loadText=\"上拉加载更多\";\n            }\n            let arr = [];\n            let list = res.data.data.list;\n            for (let i = 0; i < list.length; i++) {\n                arr.push(this.__format(list[i]));\n            }\n            this.tablist[this.tabIndex].list = this.tablist[this.tabIndex].page > 1 ? \n                this.tablist[this.tabIndex].list.concat(arr) : arr;\n            this.tablist[this.tabIndex].firstload = true;\n            uni.stopPullDownRefresh();\n            return\tthis.tablist[this.tabIndex].loadText=(list.length < 10) ?\"没有更多数据了\" : \"上拉加载更多\";\n        },\n            // 转换格式\n\t\t\t__format(item){\n\t\t\t    return {\n\t\t\t        userid:item.user.id,\n\t\t\t        userPic:item.user.userpic,\n\t\t\t        userName:item.user.username,\n\t\t\t        isFollow:!!item.user.fens.length,\n\t\t\t        id:item.id,\n\t\t\t        title:item.title,\n\t\t\t        type:\"img\", // img:图文,video:视频\n\t\t\t        titlePic:!!item.images[0].url ? item.images[0].url : '',\n\t\t\t        video:false,\n\t\t\t        path:item.path,\n\t\t\t        share:!!item.share,\n\t\t\t        likeInfo:{\n\t\t\t            // index:!!item.support? (item.support[0].type+1) : 0,//0:没有操作，1:顶,2:踩；\n\t\t\t            index: 0,//0:没有操作，1:顶,2:踩；\n\t\t\t            likeNum:item.ding_count,\n\t\t\t            dislikeNum:item.cai_count,\n\t\t\t        },\n\t\t\t        commentNum:item.comment_count,\n\t\t\t        shareNum:item.sharenum,\n                    likeNum:item.ding_count\n\t\t\t    }\n\t\t\t},\n            \n            //上拉加载\n            loadMore(){\n                if(this.tablist[this.tabIndex].loadText != \"上拉加载更多\"){\n                    return;//如果正在加载中(＾o＾)ﾉ或没有数据可以加载，则停止请求\n                }\n                console.log(\"running1\")\n                this.tablist[this.tabIndex].loadText = \"加载中(＾o＾)ﾉ\";\n                // 页数++ 获取数据\n                this.tablist[this.tabIndex].page++;\n                this.getList();\n            },\n\t\t\t//tabBar点击事件\n\t\t\ttabSwitch(index){\n\t\t\t    //点击操作获取了当前的index，再将其写入tabIndex中，匹配的项目改变样式\n\t\t\t    this.tabIndex = index;\n                this.tablist[this.tabIndex].page = 1;\n\t\t\t    this.getList();\n\t\t\t},\n            updateData(data){\n                switch (data.type){\n                    case 'guanzhu':\n                        this.updateGuanZhu(data)\n                        break;\n                    case \"support\":\n                        this.updateSupport(data);\n                        break;\n                    case 'updateComment':\n                        this.updateComment(data);\n                        break;\n                }\n            },\n            // 更新关注信息\n            updateGuanZhu(data){\n                this.tablist[this.tabIndex].list.forEach((item,index)=>{\n                    if (item.userid === data.userid) {\n                        item.isFollow = data.data;\n                    }\n                })\n            },\n            updateComment(data){\n                        // 拿到当前对象\n                let obj = this.tablist[this.tabIndex].list.find(value =>{\n                    return value.id === data.post_id;\n                });\n                if (!obj) return;\n                obj.commentNum++; // 评论数+1\n            },\n            updateSupport(data){\n                let obj = this.tablist[this.tabIndex].list.find((item)=>{\n                    return item.id === data.post_id;\n                })\n                if(!obj || obj.infonum.index === 1) return;\n                if (data.do === 1) {\n                    obj.likeInfo.index = 1;\n                    obj.likeNum++;\n                }\n            },\n\t\t}\n\t}\n"],"sourceRoot":""}