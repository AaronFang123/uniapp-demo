{"version":3,"sources":["webpack:///D:/uniapp/demo/main.js","webpack:///D:/uniapp/demo/pages/search/search.vue?0ade","webpack:///D:/uniapp/demo/pages/search/search.vue?ff5e","webpack:///D:/uniapp/demo/pages/search/search.vue?c993","webpack:///D:/uniapp/demo/pages/search/search.vue?f2e9","webpack:///D:/uniapp/demo/pages/search/search.vue"],"names":["createPage","Page","components","indexList","emptyContent","loadMore","topicList","data","isSearch","loadText","list","keyword","page","searchType","methods","getData","uni","showLoading","title","mask","url","$http","post","token","checkToken","err","res","error","errorCheck","hideLoading","console","log","arr","i","length","push","__format","concat","item","userid","user","id","userPic","userpic","userName","username","isFollow","fens","type","titlePic","images","video","path","share","likeInfo","index","support","likeNum","ding_count","dislikeNum","cai_count","commentNum","comment_count","shareNum","sharenum","titlepic","desc","totalPostNum","post_count","todayPostNum","todaypost_count","onNavigationBarSearchInputChanged","e","onNavigationBarSearchInputConfirmed","JSON","stringify","text","onReachBottom","onPullDownRefresh","stopPullDownRefresh","onLoad"],"mappings":"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","file":"pages/search/search.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/search/search.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./search.vue?vue&type=template&id=4d247fb8&\"\nvar renderjs\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4d247fb8')) {\n      api.createRecord('4d247fb8', component.options)\n    } else {\n      api.reload('4d247fb8', component.options)\n    }\n    module.hot.accept(\"./search.vue?vue&type=template&id=4d247fb8&\", function () {\n      api.rerender('4d247fb8', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"uniapp/demo/pages/search/search.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=template&id=4d247fb8&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n    import indexList from \"../../components/index/index-list.vue\";\n    import emptyContent from \"../../components/common/empty-content.vue\";\n    import loadMore from '../../components/common/load-more.vue';\n    import topicList from '../../components/news/topic-list.vue';\n\texport default {\n        components:{\n            indexList,\n            emptyContent,\n            loadMore,\n            topicList\n        },\n\t\tdata() {\n\t\t\treturn {\n                isSearch:false,\n                loadText:\"上拉加载更多\",\n\t\t\t\tlist:[],\n                keyword:\"\",\n                page:1,\n                searchType:\"post\"\n\t\t\t}\n\t\t},\n\t\tmethods: {\n            //搜索事件\n            async getData(){\n                uni.showLoading({\n                    isSearch:false,\n                    title: '搜索中(｀･ω･)',\n                    mask: false\n                });\n                //请求服务端 post keyword:value\n                let url = '';\n                switch (this.searchType){\n                    case \"topic\":\n                        url = 'search/topic';\n                        break;\n                    case \"post\":\n                        url = 'search/post';\n                        break;\n                }\n                \n                let [err,res] =await this.$http.post(url,{\n                    keyword:this.keyword,\n                    page:this.page\n                },{token:true, checkToken:false});\n                let error = this.$http.errorCheck(err,res,()=>{\n                    uni.hideLoading();\n                    this.isSearch=true;\n                },()=>{\n                    uni.hideLoading();\n                    this.isSearch=true;\n                });\n                console.log(res)\n                if (!error) return;\n                let arr = [];\n                let list = res.data.data.list;\n                for (let i = 0; i < list.length; i++) {\n                    arr.push(this.__format(list[i]));\n                }\n                this.list = this.page > 1\n                    ? this.list.concat(arr) : arr;\n                this.isSearch = true;\n                // 拿到最后一页\n                if (list.length < 10) {\n                    this.loadText=\"没有更多数据了(`ε´ )\";\n                }else{\n                    this.loadText=\"上拉加载更多\";\n                }\n                uni.hideLoading();\n            },\n             //上拉加载更多\n\t\t\tloadMore(){\n\t\t\t    if( this.loadText != \"上拉加载更多\"){\n\t\t\t        return;//如果正在加载中(＾o＾)ﾉ或没有数据可以加载，则停止请求\n\t\t\t    }\n\t\t\t    this.loadText = \"加载中(＾o＾)ﾉ\";\n\t\t\t    //修改状态\n                this.loadText = \"加载中(＾o＾)ﾉ\";\n                this.page++;\n                this.getData();\n            },\n            __format(item){\n                switch (this.searchType){\n                    case \"post\":\n                        return {\n                            userid:item.user.id,\n                            userPic:item.user.userpic,\n                            userName:item.user.username,\n                            // isFollow:!!item.user.fens.length,\n                            // isFollow:!!item.user.fens.length,\n                            isFollow:!!item.user.fens ? !!item.user.fens.length :false,\n                            id:item.id,\n                            title:item.title,\n                            type:\"img\", // img:图文,video:视频\n                            titlePic:!!item.images[0].url ? item.images[0].url : '',\n                            video:false,\n                            path:item.path,\n                            share:!!item.share,\n                            likeInfo:{\n                                index:(item.support.length>0) ? (item.support[0].type+1) : 0,//0:没有操作，1:顶,2:踩；\n                                likeNum:item.ding_count,\n                                dislikeNum:item.cai_count,\n                            },\n                            commentNum:item.comment_count,\n                            shareNum:item.sharenum,\n                        }\n                        break;\n                    case \"topic\":\n                        return {\n                            id:item.id,\n                            titlePic:item.titlepic,\n                            title:item.title,\n                            desc:item.desc,\n                            totalPostNum:item.post_count,\n                            todayPostNum:item.todaypost_count\n                        }\n                        break;\n                }\n            }\n\t\t},\n        //监听搜索框文本变化\n        onNavigationBarSearchInputChanged(e) {\n        },\n        //监听搜索框文本确认\n        onNavigationBarSearchInputConfirmed(e) {\n           console.log(JSON.stringify(e.text));\n           if(e.text){\n               this.keyword = e.text;\n               this.getData()\n           }\n        },\n        onReachBottom() {\n            this.loadMore()\n        },\n        onPullDownRefresh() {\n            this.getData(this.keyword);\n            uni.stopPullDownRefresh();\n        },\n        onLoad(e){\n            if (!e) return;\n            this.searchType = e.searchType || 'post';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n            // 开启监听\n            // uni.$on('updateData',this.updateData);\n        }\n\t}\n"],"sourceRoot":""}