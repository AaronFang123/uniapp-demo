(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-search-search"],{"0fcd":function(t,e,i){"use strict";var n=i("d3dc"),a=i.n(n);a.a},"12dc":function(t,e,i){var n=i("b089");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("cacec1b8",n,!0,{sourceMap:!1,shadowMode:!1})},"208f":function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("f499")),o=n(i("768b"));i("96cf");var r=n(i("3b8d"));i("ac6a"),i("7514");var u=n(i("70e8")),s=n(i("6460")),c=n(i("f851")),d=n(i("f514")),f=n(i("726c")),l={components:{indexList:u.default,emptyContent:s.default,loadMore:c.default,topicList:d.default,userList:f.default},data:function(){return{isSearch:!1,loadText:"上拉加载更多",list:[],keyword:"",page:1,searchType:"post"}},methods:{updateData:function(t){switch(t.type){case"guanzhu":this.updateGuanZhu(t);break;case"support":this.updateSupport(t);break;case"updateComment":this.updateComment(t);break}},updateComment:function(t){var e=this.list.find(function(e){return e.id===t.post_id});e&&e.commentNum++},updateSupport:function(t){var e=this.list.find(function(e){return e.id===t.post_id});if(e){var i=e.likeInfo.index;e.likeInfo.index=t.do,0!==i&&(1==i?e.likeInfo.likeNum--:e.likeInfo.dislikeNum--),0!==e.likeInfo.index&&(1==e.likeInfo.index?e.likeInfo.likeNum++:e.likeInfo.dislikeNum++)}},updateGuanZhu:function(t){this.list.forEach(function(e,i){e.userid===t.userid&&(e.isFollow=t.data)})},getData:function(){var t=(0,r.default)(regeneratorRuntime.mark(function t(){var e,i,n,a,r,u,s,c,d,f=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:uni.showLoading({isSearch:!1,title:"搜索中(｀･ω･)",mask:!1}),e="",t.t0=this.searchType,t.next="topic"===t.t0?5:"post"===t.t0?7:"user"===t.t0?9:11;break;case 5:return e="search/topic",t.abrupt("break",11);case 7:return e="search/post",t.abrupt("break",11);case 9:return e="search/user",t.abrupt("break",11);case 11:return t.next=13,this.$http.post(e,{keyword:this.keyword,page:this.page},{token:!0,checkToken:!1});case 13:if(i=t.sent,n=(0,o.default)(i,2),a=n[0],r=n[1],u=this.$http.errorCheck(a,r,function(){uni.hideLoading(),f.isSearch=!0},function(){uni.hideLoading(),f.isSearch=!0}),console.log(r),u){t.next=21;break}return t.abrupt("return");case 21:for(s=[],c=r.data.data.list,d=0;d<c.length;d++)s.push(this.__format(c[d]));console.log(s),this.list=this.page>1?this.list.concat(s):s,this.isSearch=!0,c.length<10?this.loadText="没有更多数据了(`ε´ )":this.loadText="上拉加载更多",uni.hideLoading();case 29:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),loadMore:function(){"上拉加载更多"==this.loadText&&(this.loadText="加载中(＾o＾)ﾉ",this.loadText="加载中(＾o＾)ﾉ",this.page++,this.getData())},__format:function(t){switch(this.searchType){case"post":return{userid:t.user.id,userPic:t.user.userpic,userName:t.user.username,isFollow:!!t.user.fens.length,id:t.id,title:t.title,type:"img",titlePic:t.images[0]?t.images[0].url:"",video:!1,path:t.path,share:!!t.share,likeInfo:{index:t.support.length>0?t.support[0].type+1:0,likeNum:t.ding_count,dislikeNum:t.cai_count},commentNum:t.comment_count,shareNum:t.sharenum};case"topic":return{id:t.id,titlePic:t.titlepic,title:t.title,desc:t.desc,totalPostNum:t.post_count,todayPostNum:t.todaypost_count};case"user":return{id:t.id,userpic:t.userpic,name:t.username,isFollow:!1}}},goBack:function(){uni.navigateBack({delta:1})}},onNavigationBarSearchInputChanged:function(t){},onNavigationBarSearchInputConfirmed:function(t){console.log((0,a.default)(t.text)),t.text&&(this.keyword=t.text,this.getData())},onReachBottom:function(){this.loadMore()},onPullDownRefresh:function(){this.getData(this.keyword),uni.stopPullDownRefresh()},onLoad:function(t){t&&(this.searchType=t.searchType||"post",uni.$on("updateData",this.updateData))}};e.default=l},2324:function(t,e,i){"use strict";i.r(e);var n=i("208f"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},"321d":function(t,e,i){"use strict";var n=i("12dc"),a=i.n(n);a.a},3629:function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("c5f6");var a=n(i("7f96")),o={components:{tagGenderAge:a.default},props:{item:Object,index:Number,hidden:{type:Boolean,default:!1}},methods:{openSpace:function(){uni.navigateTo({url:"../../pages/user-space/user-space?userid="+this.item.id})}}};e.default=o},6030:function(t,e,i){"use strict";i.r(e);var n=i("dbb4"),a=i("2324");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);var r,u=i("f0c5"),s=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"300adc72",null,!1,n["a"],r);e["default"]=s.exports},6237:function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("f499"));i("c5f6");var o={props:{item:Object,index:Number,ischange:{type:Boolean,default:!1}},methods:{openTopicDetial:function(){if(this.ischange)return uni.$emit("changeTopic",{id:this.item.id,title:this.item.title}),void uni.navigateBack({delta:1});uni.navigateTo({url:"../../pages/topic-detail/topic-detail?detail="+(0,a.default)(this.item)})}}};e.default=o},6656:function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"tag-age-gender",class:[1==t.gender?"icon iconfont icon-nan male":"icon iconfont icon-nv female"]},[t._v(t._s(t.age))])},o=[];i.d(e,"b",function(){return a}),i.d(e,"c",function(){return o}),i.d(e,"a",function(){return n})},"6d7b":function(t,e,i){"use strict";i.r(e);var n=i("3629"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},"726c":function(t,e,i){"use strict";i.r(e);var n=i("82cf"),a=i("6d7b");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("321d");var r,u=i("f0c5"),s=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"249cff99",null,!1,n["a"],r);e["default"]=s.exports},"7aa4":function(t,e,i){"use strict";i.r(e);var n=i("7cd5"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},"7cd5":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("c5f6");var n={props:{gender:Number,age:Number}};e.default=n},"7eb6":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".topic-list>uni-image[data-v-51cafd47]{width:%?150?%;height:%?150?%;border:%?10?%;margin:%?10?% %?20?%;box-shadow:0 %?4?% %?8?% rgba(0,0,0,.3)}.topic-list[data-v-51cafd47]{border-bottom:%?1?% solid #eee;box-shadow:0 %?2?% %?4?% rgba(0,0,0,.3);background-color:#fff!important;margin:%?10?% %?15?%}.topic-list>uni-view>uni-view[data-v-51cafd47]{color:#a4a4a4}\n/* 话题名称 */.topic-list>uni-view>uni-view[data-v-51cafd47]:first-child{color:#333;font-size:%?32?%}",""])},"7f96":function(t,e,i){"use strict";i.r(e);var n=i("6656"),a=i("7aa4");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("0fcd");var r,u=i("f0c5"),s=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"038e10cd",null,!1,n["a"],r);e["default"]=s.exports},"82cf":function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"user-list u-f-ac u-f-jsb",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.openSpace.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"u-f-jsb u-f-ac"},[i("v-uni-view",{staticClass:"user-list-userpic"},[i("v-uni-image",{attrs:{src:t.item.userpic,mode:"widthFix","lazy-load":!0}})],1),i("v-uni-view",{staticClass:"u-f-ac"},[i("v-uni-view",[t._v(t._s(t.item.name))])],1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.hidden,expression:"!hidden"}]},[t.item.isFollow?[i("v-uni-view",{staticClass:"icon  iconfont icon-xuanze-yixuan"})]:[i("v-uni-view",{staticClass:"icon  iconfont icon-zengjia1"})]],2)],1)},o=[];i.d(e,"b",function(){return a}),i.d(e,"c",function(){return o}),i.d(e,"a",function(){return n})},"8e96":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".tag-age-gender[data-v-038e10cd]{background:#009687;color:#fff;font-size:%?20?%;padding:%?-5?% %?0?%;margin-left:%?10?%;border-radius:%?15?%;box-shadow:0 %?2?% %?4?% rgba(0,0,0,.3)}.male[data-v-038e10cd]{background:#00f}.female[data-v-038e10cd]{background:pink}",""])},9651:function(t,e,i){"use strict";var n=i("e994"),a=i.n(n);a.a},"98b6":function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"topic-list u-f animated fadeIn faster",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openTopicDetial.apply(void 0,arguments)}}},[i("v-uni-image",{attrs:{src:t.item.titlePic,mode:"widthFix","lazy-load":!0}}),i("v-uni-view",{},[i("v-uni-view",{},[t._v("#"+t._s(t.item.title)+"#")]),i("v-uni-view",{},[t._v(t._s(t.item.desc))]),i("v-uni-view",{},[t._v("动态 "+t._s(t.item.totalPostNum)+" 今日 "+t._s(t.item.todayPostNum))])],1)],1)},o=[];i.d(e,"b",function(){return a}),i.d(e,"c",function(){return o}),i.d(e,"a",function(){return n})},b089:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".user-list[data-v-249cff99]{\n  /*  border: 1upx solid; */margin:0 %?20?%;border-bottom:%?1?% #eee solid;padding:%?10?% %?10?%;height:%?150?%;background-color:#fff!important;margin:%?10?% %?15?%;box-shadow:0 %?2?% %?4?% rgba(0,0,0,.3)}.user-list-userpic>uni-image[data-v-249cff99]{width:%?100?%;height:%?100?%;border-radius:100%;\n    /* border: 1upx solid; */margin-right:%?20?%;box-shadow:0 %?4?% %?8?% rgba(0,0,0,.3)}.user-list>uni-view[data-v-249cff99]:last-child{color:#ccc;font-size:%?42?%}.icon-zengjia1[data-v-249cff99]{color:#f87918!important}",""])},d3dc:function(t,e,i){var n=i("8e96");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("5f869283",n,!0,{sourceMap:!1,shadowMode:!1})},dbb4:function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[t.list.length>0?[t._l(t.list,function(e,n){return["post"==t.searchType?[i("index-list",{attrs:{item:e,index:n},on:{changeevent:function(e){arguments[0]=e=t.$handleEvent(e),t.updateData.apply(void 0,arguments)}}})]:t._e(),"topic"==t.searchType?[i("topic-list",{attrs:{item:e,index:n}})]:[i("user-list",{attrs:{item:e,index:n,hidden:!0}})]]}),i("load-more",{attrs:{loadText:t.loadText}})]:t.list.length<1&&t.isSearch?[i("empty-content")]:[i("v-uni-view",{staticClass:"blank"})]],2)},o=[];i.d(e,"b",function(){return a}),i.d(e,"c",function(){return o}),i.d(e,"a",function(){return n})},e4c9:function(t,e,i){"use strict";i.r(e);var n=i("6237"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},e994:function(t,e,i){var n=i("7eb6");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("10a753a6",n,!0,{sourceMap:!1,shadowMode:!1})},f514:function(t,e,i){"use strict";i.r(e);var n=i("98b6"),a=i("e4c9");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("9651");var r,u=i("f0c5"),s=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"51cafd47",null,!1,n["a"],r);e["default"]=s.exports}}]);