(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-bind-phone-user-bind-phone"],{"2ec1":function(t,e,n){"use strict";n.r(e);var i=n("5a62"),o=n("5ae1");for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n("614d");var r,s=n("f0c5"),u=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"07ec64d8",null,!1,i["a"],r);e["default"]=u.exports},5094:function(t,e,n){var i=n("6332");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("4f06").default;o("451278bf",i,!0,{sourceMap:!1,shadowMode:!1})},"5a62":function(t,e,n){"use strict";var i,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"body"},[n("v-uni-input",{staticClass:"uni-input common-input",attrs:{type:"number",placeholder:"输入手机号",disabled:t.isbind},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),t.isbind?t._e():n("v-uni-view",{staticClass:"login-input-box"},[n("v-uni-input",{staticClass:"uni-input common-input forget-input",attrs:{type:"text",placeholder:"请输入验证码"},model:{value:t.checknum,callback:function(e){t.checknum=e},expression:"checknum"}}),n("v-uni-view",{staticClass:"forget u-f-ajc login-font-color yanzhengma",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCheckNum.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"u-f-ajc"},[t._v(t._s(t.codetime?t.codetime+" s":"获取验证码"))])],1)],1),n("v-uni-button",{staticClass:"user-set-btn",class:{"user-set-btn-disable":t.disabled},attrs:{loading:t.loading,type:"primary",disabled:t.disabled||t.isbind},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v(t._s(t.isbind?"已绑定":"立即绑定"))])],1)},a=[];n.d(e,"b",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return i})},"5ae1":function(t,e,n){"use strict";n.r(e);var i=n("9232"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=o.a},"614d":function(t,e,n){"use strict";var i=n("5094"),o=n.n(i);o.a},6332:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"/* 公共按钮 */.user-set-btn[data-v-07ec64d8]{width:100%;margin:%?20?% 0;background:#009687!important;border:0!important;\r\n\t/* color: #333333!important; */color:#fff!important}.user-set-btn-disable[data-v-07ec64d8]{background:#f4f4f4!important;border:%?1?% solid #eee!important;color:#909090!important}.body[data-v-07ec64d8]{padding:0 %?20?%!important}.common-input[data-v-07ec64d8]{font-size:%?30?%;border-bottom:%?1?% solid #f4f4f4}.login-input-box[data-v-07ec64d8]{position:relative}.login-input-box .forget-input[data-v-07ec64d8]{padding-right:%?150?%}.login-input-box .forget[data-v-07ec64d8]{position:absolute;top:0;height:100%;z-index:100}.login-input-box .forget[data-v-07ec64d8]{width:%?150?%;right:0}.login-input-box .phone[data-v-07ec64d8]{width:%?100?%;left:0;font-weight:700}.login-input-box .phone-input[data-v-07ec64d8]{padding-left:%?100?%}.yanzhengma uni-view[data-v-07ec64d8]{background:#009687;border-radius:%?10?%;font-size:%?25?%;width:%?150?%;padding:%?10?% 0;color:#fff}",""])},9232:function(t,e,n){"use strict";var i=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("768b"));n("96cf");var a=i(n("3b8d")),r={data:function(){return{isbind:!1,disabled:!0,loading:!1,phone:"",checknum:"",codetime:0}},onLoad:function(t){"false"!==t.phone&&t.phone&&"null"!==t.phone&&(this.isbind=!0,this.phone=t.phone)},watch:{phone:function(t){this.OnBtnChange()},checknum:function(t){this.OnBtnChange()}},methods:{isPhone:function(){var t=/^1[34578]\d{9}$/;return t.test(this.phone)},OnBtnChange:function(){this.phone&&this.checknum?this.disabled=!1:this.disabled=!0},getCheckNum:function(){var t=(0,a.default)(regeneratorRuntime.mark(function t(){var e,n,i,a,r,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.codetime>0)){t.next=2;break}return t.abrupt("return");case 2:if(this.isPhone()){t.next=4;break}return t.abrupt("return",uni.showToast({title:"请输入正确的手机号码",icon:"none"}));case 4:return t.next=6,this.$http.post("/user/sendcode",{phone:this.phone});case 6:if(e=t.sent,n=(0,o.default)(e,2),i=n[0],a=n[1],this.$http.errorCheck(i,a),30001!==a.data.errorCode){t.next=13;break}return t.abrupt("return");case 13:this.codetime=60,r=setInterval(function(){s.codetime--,s.codetime<1&&(clearInterval(r),s.codetime=0)},1e3);case 15:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),submit:function(){var t=(0,a.default)(regeneratorRuntime.mark(function t(){var e,n,i,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log(this.checknum),t.next=3,this.$http.post("user/bindphone",{phone:this.phone,code:this.checknum},{token:!0,checkToken:!0});case 3:if(e=t.sent,n=(0,o.default)(e,2),i=n[0],a=n[1],console.log(a),this.$http.errorCheck(i,a)){t.next=10;break}return t.abrupt("return");case 10:this.isbind=!0,this.disabled=!1,uni.showToast({title:"绑定成功！"}),r=a.data.data,"boolean"===typeof r?this.User.userinfo.phone=this.phone:this.User.userinfo=this.User.__formatUserinfo(r),uni.setStorageSync("userinfo",this.User.userinfo);case 16:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}};e.default=r}}]);