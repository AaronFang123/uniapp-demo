(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-topic-detail-topic-detail"],{"009b":function(t,i,e){"use strict";var a,n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("topic-info",{attrs:{topicInfo:t.topicInfo}}),e("swiper-tab-head",{attrs:{tabBars:t.tabBars,tabIndex:t.tabIndex},on:{tabSwitch:function(i){arguments[0]=i=t.$handleEvent(i),t.tabSwitch.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"topic-detail-list",staticStyle:{"background-color":"#EEEEEE"}},[e("v-uni-text"),t._l(t.tablist,function(i,a){return[e("v-uni-text"),t.tabIndex==a?[e("v-uni-view",{},[t._v(t._s(t.tabBars[a].name))]),t._l(i.list,function(i,a){return[e("v-uni-text"),e("common-list",{key:a+"_1",attrs:{item:i,index:a},on:{changeevent:function(i){arguments[0]=i=t.$handleEvent(i),t.updateData.apply(void 0,arguments)}}})]}),e("load-more",{attrs:{loadText:i.loadText}})]:t._e()]})],2)],1)},o=[];e.d(i,"b",function(){return n}),e.d(i,"c",function(){return o}),e.d(i,"a",function(){return a})},"28d5":function(t,i,e){"use strict";e.r(i);var a=e("009b"),n=e("8f1b");for(var o in n)"default"!==o&&function(t){e.d(i,t,function(){return n[t]})}(o);var s,r=e("f0c5"),u=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"49b5eda0",null,!1,a["a"],s);i["default"]=u.exports},"3ea1":function(t,i,e){"use strict";var a,n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{},[e("v-uni-view",{staticClass:"topic-bg"},[e("v-uni-image",{attrs:{src:t.topicInfo.titlePic,mode:"aspectFill","lazy-load":!0}})],1),e("v-uni-view",{staticClass:"topic-info"},[e("v-uni-view",{staticClass:"topic-info-t u-f-ac"},[e("v-uni-image",{attrs:{src:t.topicInfo.titlePic,mode:"widthFix","lazy-load":!0}}),e("v-uni-view",{},[t._v("#"+t._s(t.topicInfo.title)+"#")])],1),e("v-uni-view",{staticClass:"topic-info-c u-f-ac"},[e("v-uni-view",{},[t._v("动态 "+t._s(t.topicInfo.totalPostNum))]),e("v-uni-view",{},[t._v("今日 "+t._s(t.topicInfo.todayPostNum))])],1),e("v-uni-view",{staticClass:"topic-info-b"},[t._v(t._s(t.topicInfo.desc))])],1)],1)},o=[];e.d(i,"b",function(){return n}),e.d(i,"c",function(){return o}),e.d(i,"a",function(){return a})},4295:function(t,i,e){"use strict";e.r(i);var a=e("b1bd"),n=e("8907");for(var o in n)"default"!==o&&function(t){e.d(i,t,function(){return n[t]})}(o);e("d69a");var s,r=e("f0c5"),u=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"72ffdd34",null,!1,a["a"],s);i["default"]=u.exports},"44f1":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a={props:{topicInfo:Object}};i.default=a},4823:function(t,i,e){"use strict";var a=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("7514"),e("ac6a");var n=a(e("768b"));e("96cf");var o=a(e("3b8d")),s=a(e("f851")),r=a(e("81df")),u=a(e("4295")),d=a(e("cdd2")),c={components:{topicInfo:r.default,loadMore:s.default,swiperTabHead:u.default,commonList:d.default},data:function(){return{tabIndex:0,tabBars:[{name:"默认",id:"default"},{name:"最新",id:"lastest"}],tablist:[{loadText:"上拉加载更多",firstload:!1,page:1,list:[]},{loadText:"上拉加载更多",firstload:!1,page:1,list:[]}],topicInfo:{}}},onReachBottom:function(){this.loadMore()},onPullDownRefresh:function(){this.getList()},onLoad:function(t){this.__init(JSON.parse(t.detail)),uni.$on("updateData",this.updateData)},methods:{__init:function(t){this.topicInfo=t,uni.setNavigationBarTitle({title:t.title}),this.getList()},getList:function(){var t=(0,o.default)(regeneratorRuntime.mark(function t(){var i,e,a,o,s,r,u,d;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return uni.showLoading({title:"加载中"}),i="topic/".concat(this.topicInfo.id,"/post/").concat(this.tablist[this.tabIndex].page),t.next=4,this.$http.get(i,{},{token:!0});case 4:if(e=t.sent,a=(0,n.default)(e,2),o=a[0],s=a[1],this.$http.errorCheck(o,s)){t.next=10;break}return t.abrupt("return",this.tablist[this.tabIndex].loadText="上拉加载更多");case 10:for(r=[],u=s.data.data.list,console.log("话题详情页资源"),console.log(u),d=0;d<u.length;d++)r.push(this.__format(u[d])),console.log(d+"pass");return this.tablist[this.tabIndex].list=this.tablist[this.tabIndex].page>1?this.tablist[this.tabIndex].list.concat(r):r,this.tablist[this.tabIndex].firstload=!0,uni.stopPullDownRefresh(),uni.hideLoading(),t.abrupt("return",this.tablist[this.tabIndex].loadText=u.length<10?"没有更多数据了":"上拉加载更多");case 20:case"end":return t.stop()}},t,this)}));function i(){return t.apply(this,arguments)}return i}(),__format:function(t){return{userid:t.user.id,userPic:t.user.userpic,userName:t.user.username,isFollow:!!t.user.fens.length,id:t.id,title:t.title,type:"img",titlePic:t.titlepic?t.titlepic:"",video:!1,path:t.path,share:!!t.share,likeInfo:{index:0,likeNum:t.ding_count,dislikeNum:t.cai_count},commentNum:t.comment_count,shareNum:t.sharenum,likeNum:t.ding_count}},loadMore:function(){"上拉加载更多"==this.tablist[this.tabIndex].loadText&&(console.log("running1"),this.tablist[this.tabIndex].loadText="加载中(＾o＾)ﾉ",this.tablist[this.tabIndex].page++,this.getList())},tabSwitch:function(t){this.tabIndex=t,this.tablist[this.tabIndex].page=1,this.getList()},updateData:function(t){switch(t.type){case"guanzhu":this.updateGuanZhu(t);break;case"support":this.updateSupport(t);break;case"updateComment":this.updateComment(t);break}},updateGuanZhu:function(t){this.tablist[this.tabIndex].list.forEach(function(i,e){i.userid===t.userid&&(i.isFollow=t.data)})},updateComment:function(t){var i=this.tablist[this.tabIndex].list.find(function(i){return i.id===t.post_id});i&&i.commentNum++},updateSupport:function(t){var i=this.tablist[this.tabIndex].list.find(function(i){return i.id===t.post_id});i&&1!==i.infonum.index&&1===t.do&&(i.likeInfo.index=1,i.likeNum++)}}};i.default=c},"7ea3":function(t,i,e){var a=e("9659");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("71de05ca",a,!0,{sourceMap:!1,shadowMode:!1})},"81df":function(t,i,e){"use strict";e.r(i);var a=e("3ea1"),n=e("e7a0");for(var o in n)"default"!==o&&function(t){e.d(i,t,function(){return n[t]})}(o);e("8a05");var s,r=e("f0c5"),u=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"6efa9d82",null,!1,a["a"],s);i["default"]=u.exports},"86e3":function(t,i,e){var a=e("b0b6");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("28f67ef4",a,!0,{sourceMap:!1,shadowMode:!1})},8907:function(t,i,e){"use strict";e.r(i);var a=e("94c9"),n=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,function(){return a[t]})}(o);i["default"]=n.a},"8a05":function(t,i,e){"use strict";var a=e("7ea3"),n=e.n(a);n.a},"8f1b":function(t,i,e){"use strict";e.r(i);var a=e("4823"),n=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,function(){return a[t]})}(o);i["default"]=n.a},"94c9":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("c5f6");var a={props:{tabBars:Array,tabIndex:Number},methods:{tabSwitch:function(t){this.$emit("tabSwitch",t)}}};i.default=a},9659:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,".topic-bg[data-v-6efa9d82]{width:100%;height:%?300?%;position:relative;overflow:hidden/*超出部分隐藏*/}.topic-bg>uni-image[data-v-6efa9d82]{position:absolute;width:100%;-webkit-filter:blur(2px);filter:blur(2px);/*滤镜*/box-shadow:0 %?2?% %?4?% rgba(0,0,0,.3)}.topic-info[data-v-6efa9d82]{padding:0 %?25?%}.topic-info-t[data-v-6efa9d82]{position:relative}.topic-info-t>uni-view[data-v-6efa9d82]{margin-left:%?170?%;font-size:%?35?%;font-weight:700;-webkit-box-flex:1;-webkit-flex:1;flex:1;padding-left:%?20?%}.topic-info-t>uni-image[data-v-6efa9d82]{width:%?150?%;height:%?150?%;border-radius:%?20?%;position:absolute;/*绝对定位上一层要相对定位*/top:%?-75?%;/*穿到上一组件 用负值*/box-shadow:0 %?4?% %?8?% rgba(0,0,0,.3)}.topic-info-c[data-v-6efa9d82]{margin-top:%?20?%;padding:%?10?% 0 %?10?% 0}.topic-info-c>uni-view[data-v-6efa9d82]{color:#cdcdcd;margin-right:%?15?%}.topic-info-b[data-v-6efa9d82]{color:#a3a3a3;font-size:%?32?%;padding-bottom:%?10?%}",""])},b0b6:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,".swiper-tab-list[data-v-72ffdd34]{color:#969696;font-size:%?30?%;font-weight:700}.uni-tab-bar .active[data-v-72ffdd34]{color:#343434;font-size:%?38?%}.active .swiper-tab-underLine[data-v-72ffdd34]{border:%?1?% solid #009687;width:%?70?%;margin:auto;border-top:6px solid #009687;border-radius:%?10?%}.uni-swiper-tab[data-v-72ffdd34]{border-bottom:0 %?4?% %?8?% rgba(0,0,0,.3)}",""])},b1bd:function(t,i,e){"use strict";var a,n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"uni-tab-bar"},[e("v-uni-scroll-view",{staticClass:"uni-swiper-tab",attrs:{"scroll-x":!0}},[t._l(t.tabBars,function(i,a){return[e("v-uni-view",{key:i.id+"_0",staticClass:"swiper-tab-list",class:{active:t.tabIndex==a},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.tabSwitch(a)}}},[t._v(t._s(i.name)+" "+t._s(i.num?i.num:"")),e("v-uni-view",{staticClass:"swiper-tab-underLine"})],1)]})],2)],1)},o=[];e.d(i,"b",function(){return n}),e.d(i,"c",function(){return o}),e.d(i,"a",function(){return a})},d69a:function(t,i,e){"use strict";var a=e("86e3"),n=e.n(a);n.a},e7a0:function(t,i,e){"use strict";e.r(i);var a=e("44f1"),n=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,function(){return a[t]})}(o);i["default"]=n.a}}]);