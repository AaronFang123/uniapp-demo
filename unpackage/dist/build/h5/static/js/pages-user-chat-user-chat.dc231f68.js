(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-chat-user-chat"],{"0743":function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"user-chat-bottom u-f-ac animated fadeInDown faster"},[i("v-uni-view",{staticClass:"icon iconfont icon-gengduo",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectEmoji.apply(void 0,arguments)}}}),i("v-uni-input",{attrs:{type:"text",placeholder:t.UserName,focus:t.focus},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.blur.apply(void 0,arguments)}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),i("v-uni-view",{staticClass:"icon iconfont icon-fabu u-f-ajc",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}})],1)},r=[];i.d(e,"b",function(){return n}),i.d(e,"c",function(){return r}),i.d(e,"a",function(){return a})},"1ed1":function(t,e,i){"use strict";var a=i("33f8"),n=i.n(a);n.a},2536:function(t,e,i){"use strict";i.r(e);var a=i("c0ce"),n=i("8bc7");for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);var s,o=i("f0c5"),u=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"b3acf51c",null,!1,a["a"],s);e["default"]=u.exports},2704:function(t,e,i){"use strict";var a=i("82fb"),n=i.n(a);n.a},"33f8":function(t,e,i){var a=i("bd96");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("57d32892",a,!0,{sourceMap:!1,shadowMode:!1})},"540e":function(t,e,i){"use strict";i.r(e);var a=i("d87d"),n=i("c9a6");for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i("1ed1");var s,o=i("f0c5"),u=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"c08813a8",null,!1,a["a"],s);e["default"]=u.exports},5701:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{focus:{type:Boolean,default:!1},UserName:{type:String,default:"(ゝ∀･)"}},data:function(){return{text:""}},methods:{submit:function(){this.$emit("submit",this.text),this.text=""},selectEmoji:function(){var t=this,e=["(つд⊂)","(　^ω^)","( ´ρ`)","⊂彡☆))д`)","･ﾟ( ﾉд`ﾟ)","(　ﾟ 3ﾟ)"];uni.showActionSheet({itemList:["(つд⊂)","(　^ω^)","( ´ρ`)","⊂彡☆))д`)","･ﾟ( ﾉд`ﾟ)","(　ﾟ 3ﾟ)"],success:function(i){switch(i.tapIndex){case 0:t.text=t.text+e[0];break;case 1:t.text=t.text+e[1];break;case 2:t.text=t.text+e[2];break;case 3:t.text=t.text+e[3];break;case 4:t.text=t.text+e[4];break;case 5:t.text=t.text+e[5];break}}})},blur:function(){this.$emit("blur")}}};e.default=a},5962:function(t,e,i){"use strict";i.r(e);var a=i("0743"),n=i("a26e");for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i("2704");var s,o=i("f0c5"),u=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"89e29326",null,!1,a["a"],s);e["default"]=u.exports},"5f99":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("c5f6");var a={props:{item:Object,index:Number}};e.default=a},"7d9c":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".user-chat-bottom[data-v-89e29326]{\n  /* border: 1upx solid; */position:fixed; \n   /* 置于底部 */bottom:0;left:0;right:0;height:%?100?%;padding:0 %?20?%;background:#fff;border-top:%?3?% solid #eee}.user-chat-bottom>uni-input[data-v-89e29326]{\n   /* border: 1upx solid #009687; */\n     /* 占满剩余所有空间 */-webkit-box-flex:1;-webkit-flex:1;flex:1;background:#eee;padding-top:%?10?%;padding-bottom:%?10?%;padding-left:%?10?%;border-radius:%?10?%}.user-chat-bottom>uni-view[data-v-89e29326]{width:%?100?%;margin-right:%?14?%;margin-left:%?14?%;background:#009687;font-size:%?40?%;padding:0;border-radius:%?10?%;color:#fff;font-weight:700}.user-chat-bottom>uni-view[data-v-89e29326]:first-child{background:#fff;color:#009687}",""])},"82fb":function(t,e,i){var a=i("7d9c");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("384348e6",a,!0,{sourceMap:!1,shadowMode:!1})},"8bc7":function(t,e,i){"use strict";i.r(e);var a=i("afc9"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e["default"]=n.a},a26e:function(t,e,i){"use strict";i.r(e);var a=i("5701"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e["default"]=n.a},afc9:function(t,e,i){"use strict";var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("5962")),r=a(i("e7aa")),s=a(i("540e")),o={components:{userChatBottom:n.default,userChatList:s.default},data:function(){return{userinfo:{},list:[],style:{contentH:0,itemH:0,lastItemH:0},scrollTop:0}},onLoad:function(t){this.initData(),t.userinfo?(this.initdata(JSON.parse(t.userinfo)),this.userinfo=JSON.parse(t.userinfo)):this.initdata(JSON.parse(t.chatData)),this.getData()},onReady:function(){this.pageToButtom(!0)},onNavigationBarButtonTap:function(t){t&&uni.navigateTo({url:"../../pages/user-space/user-space?userid="+this.userinfo.id})},methods:{initData:function(){try{var t=uni.getSystemInfoSync();this.style.contentH=t.windowHeight-uni.upx2px(120)}catch(e){console.error("res request failed")}},submit:function(t){console.log(t);var e=Math.round(new Date/1e3),i={isMyMsg:!0,userPic:this.userinfo.userPic||"/static/common/ACnyn",type:"text",data:t,time:"1586262166",formatedTime:r.default.gettime.getChatTime(e,this.list[this.list.length-1].time)};this.list.push(i),this.pageToButtom()},pageToButtom:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=uni.createSelectorQuery().in(this),a=i.selectAll(".chat-item");this.$nextTick(function(){a.fields({size:!0},function(i){if(i){if(e)for(var a=0;a<i.length;a++)t.style.itemH+=i[a].height;else t.style.itemH+=i[i.height-1];t.style.itemH+=i.height,t.style.itemH>t.style.contentH&&(t.scrollTop=t.style.itemH)}}).exec()})},getData:function(){for(var t=[{isMyMsg:!1,userPic:"../../static/demo/userpic/16.jpg",type:"text",data:"聊天功能开发中",time:"1586262166"},{isMyMsg:!0,userPic:this.userinfo.userPic,type:"img",data:"../../static/demo/datapic/34.jpg",time:"1586262166"}],e=0;e<t.length;e++)t[e].formatedTime=0==e?r.default.gettime.getChatTime(t[e].time,0):r.default.gettime.getChatTime(t[e].time,t[e-1].time);this.list=t},initdata:function(t){uni.setNavigationBarTitle({title:t.userName})}}};e.default=o},bd96:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'.user-chat-list[data-v-c08813a8]{\n/*    border: 1upx solid; */margin:%?10?%;padding:%?20?% 0}.user-chat-list>uni-image[data-v-c08813a8]{width:%?100?%;height:%?100?%;border-radius:100%;-webkit-flex-shrink:0;flex-shrink:0}.user-chat-list-body[data-v-c08813a8]{\n    /* border: 1upx solid; */position:relative;background:#f4f4f4;padding:%?25?%;margin-left:%?25?%;margin-right:%?100?%;border-radius:%?50?%}\n/* 聊天消息图片样式 */.user-chat-list-body>uni-image[data-v-c08813a8]{max-width:%?150?%;max-height:%?200?%}\n/* after:可用于在元素内容之前或之后插入生成的内容。 */.user-chat-list-body[data-v-c08813a8]:after{\n    /* absolute:相对于 static 定位以外的第一个父元素进行定位。 */position:absolute;left:%?-30?%;right:0;top:%?20?%;content:"";width:0;height:0;border:%?20?% solid #f4f4f4;\n    /* 右边框颜色显示，其余边框颜色透明，自动做收缩处理 */border-color:transparent #f4f4f4 transparent transparent}.user-chat-me[data-v-c08813a8]{      \n  /*  border: 1upx solid; */-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.user-chat-me .user-chat-list-body[data-v-c08813a8]{margin-right:%?20?%;margin-left:%?100?%\n    /* border: 1upx solid; */}\n/* 用来表示层级关系 */.user-chat-me .user-chat-list-body[data-v-c08813a8]:after{left:auto;right:%?-30?%;border-color:transparent transparent transparent #f4f4f4}.user-chat-time[data-v-c08813a8]{padding:%?50?% 0;color:#a2a2a2;font-size:%?24?%}',""])},c0ce:function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-scroll-view",{style:{height:t.style.contentH+"px"},attrs:{id:"scroll-view","scroll-y":!0,"scroll-top":t.scrollTop,"scroll-with-animation":!0}},[t._l(t.list,function(t,e){return[i("v-uni-view",{key:e+"_0",staticClass:"chat-item"},[i("user-chat-list",{attrs:{item:t,index:e}})],1)]})],2),i("user-chat-bottom",{on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}})],1)},r=[];i.d(e,"b",function(){return n}),i.d(e,"c",function(){return r}),i.d(e,"a",function(){return a})},c9a6:function(t,e,i){"use strict";i.r(e);var a=i("5f99"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e["default"]=n.a},d87d:function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"user-chat-item"},[t.item.formatedTime?i("v-uni-view",{staticClass:"user-chat-time u-f-ajc"},[t._v(t._s(t.item.formatedTime))]):t._e(),i("v-uni-view",{staticClass:"user-chat-list u-f ",class:{"user-chat-me":t.item.isMyMsg}},[t.item.isMyMsg?t._e():i("v-uni-image",{attrs:{src:t.item.userPic,mode:"widthFix","lazy-load":!0}}),i("v-uni-view",{staticClass:"user-chat-list-body"},["text"==t.item.type?i("v-uni-text",[t._v(t._s(t.item.data))]):t._e(),"img"==t.item.type?i("v-uni-image",{attrs:{src:t.item.data,mode:"widthFix","lazy-load":!0}}):t._e()],1),t.item.isMyMsg?i("v-uni-image",{attrs:{src:t.item.userPic,mode:"widthFix","lazy-load":!0}}):t._e()],1)],1)},r=[];i.d(e,"b",function(){return n}),i.d(e,"c",function(){return r}),i.d(e,"a",function(){return a})}}]);