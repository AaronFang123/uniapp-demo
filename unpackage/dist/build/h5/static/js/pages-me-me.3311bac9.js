(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-me-me"],{"13cc":function(e,t,n){"use strict";var i=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var o=i(n("3b8d")),a=i(n("4e54")),r=i(n("b43e")),s=i(n("f57f")),c=i(n("82c9")),u={components:{homeListItem:a.default,homeInfo:r.default,otherLogin:s.default,homeData:c.default},methods:{openLogin:function(){uni.navigateTo({url:"../login/login"})},isLogin_func:function(){var e=(0,o.default)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.User.isUserInfoChange){e.next=4;break}return e.next=3,this.User.getUserInfo(this.User.userinfo.id);case 3:this.User.isUserInfoChange=!1;case 4:if(this.User.token){e.next=12;break}return this.isLogin=!1,this.homeInfo={userpic:"",username:"",totalnum:0,todaynum:0},this.homeData[0].num=0,this.homeData[1].num=0,this.homeData[2].num=0,this.homeData[3].num=0,e.abrupt("return");case 12:this.homeInfo.id=this.User.userinfo.id,this.homeInfo.userPic=this.User.userinfo.userpic,this.homeInfo.userName=this.User.userinfo.username,this.homeInfo.totalVistor=this.User.counts.post_count||0,this.homeInfo.todayVistor=this.User.counts.today_posts_count||0,this.homeData[0].num=this.User.counts.post_count||0,this.homeData[1].num=this.User.counts.comments_count||0,this.homeData[2].num=this.User.counts.withfen_count||0,this.isLogin=!0,console.log("userpic"),console.log(this.homeInfo.userPic);case 23:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},data:function(){return{isLogin:!1,list:[{name:"浏览历史",icon:"liulan",clickType:"nothing",url:"/pages/user-history/user-history"},{name:"实名认证",icon:"huiyuanvip",clickType:"tips",url:""},{name:"设置",icon:"keyboard",clickType:"navigateTo",url:"/pages/user-setting/user-setting",auth:!0,Nocheck:!0}],homeInfo:{userPic:"",userName:"",totalVistor:0,todayVistor:0},homeData:[{name:"动态",num:0},{name:"评论",num:0},{name:"粉丝",num:0}]}},onNavigationBarButtonTap:function(e){0==e.index&&uni.navigateTo({url:"../user-setting/user-setting"})},onShow:function(){this.isLogin_func(),console.log(this.User.userinfo),console.log(this.homeInfo),console.log(this.homeData)}};t.default=u},1893:function(e,t,n){"use strict";n.r(t);var i=n("e1ee"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);t["default"]=o.a},"1b0e":function(e,t,n){"use strict";var i,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"animated fadeIn faster"},[e.isLogin?[n("home-info",{attrs:{homeInfo:e.homeInfo}}),n("v-uni-view",{staticClass:"home-data u-f-ac u-f1 u-f-ajc "},[e._l(e.homeData,function(e,t){return[n("home-data",{key:t+"_0",attrs:{item:e,index:t}})]})],2)]:[n("other-login",{attrs:{noback:!0},on:{logining:function(t){arguments[0]=t=e.$handleEvent(t),e.isLogin_func.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"u-f-ajc",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.openLogin.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"icon iconfont icon-jinru"}),e._v("账号密码登录")],1)],n("v-uni-view",{staticClass:"home-ad-pic u-f-ajc"},[n("v-uni-image",{attrs:{src:"../../static/demo/demo20.jpg",mode:"widthFix","lazy-load":!0}})],1),n("v-uni-view",{staticClass:"home-list"},[e._l(e.list,function(e,t){return[n("home-list-item",{key:t+"_0",attrs:{item:e,index:t}})]})],2)],2)},a=[];n.d(t,"b",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return i})},"1f16":function(e,t,n){"use strict";var i,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"u-f1 u-f-ajc u-f-column"},[n("v-uni-view",[e._v(e._s(e.item.name))]),e._v(e._s(e.item.num))],1)},a=[];n.d(t,"b",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return i})},"2a3d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("c5f6");var i={props:{item:Object,index:Number},methods:{clickEven:function(){switch(this.item.clickType){case"navigateTo":var e={url:this.item.url};if(this.item.url){if(this.item.auth)return this.item.Nocheck?this.User.navigate(e,!0):this.User.navigate(e,!1);uni.navigateTo(e)}break;case"switchTab":this.item.url&&uni.switchTab({url:this.item.url});break;case"clear":uni.showModal({title:"提示",content:"是否清除缓存？确定将清除您的登录状态",confirmText:"立即清除",success:function(e){e.confirm&&(uni.User.logout(!1),uni.clearStorage(),uni.showToast({title:"清除成功！",duration:1e3}))}});case"nothing":uni.showToast({title:"更新中",icon:"none"}),uni.navigateTo({url:this.item.url});break;case"tips":uni.showToast({icon:"none",title:"功能开发中( `_っ´)"});break}}}};t.default=i},"4e54":function(e,t,n){"use strict";n.r(t);var i=n("de53"),o=n("9100");for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);n("a4c1");var r,s=n("f0c5"),c=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"5dc044c1",null,!1,i["a"],r);t["default"]=c.exports},"4f52":function(e,t,n){var i=n("cc43");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("4f06").default;o("bbc577f4",i,!0,{sourceMap:!1,shadowMode:!1})},"52a8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("c5f6");var i={props:{item:Object,index:Number}};t.default=i},5323:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".home-ad-pic[data-v-4e0704b8]{padding:%?20?% %?20?%}.home-ad-pic>uni-image[data-v-4e0704b8]{width:100%;border-radius:%?20?%}.home-list[data-v-4e0704b8]{padding:%?20?% %?20?%}.home-data[data-v-4e0704b8]{padding:%?20?% %?80?%}.home-data>uni-view[data-v-4e0704b8]{color:#989898}.home-data>uni-view>uni-view[data-v-4e0704b8]{font-size:%?36?%;color:#000!important;font-weight:700}",""])},"63ff":function(e,t,n){var i=n("5323");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("4f06").default;o("3166f932",i,!0,{sourceMap:!1,shadowMode:!1})},"651c":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".home-list-item[data-v-5dc044c1]{padding:%?10?% %?10?%;border-top:%?1?% solid #ccc;border-bottom:%?1?% solid #ccc}.home-list-hover[data-v-5dc044c1]{background:#eee}.home-list-item>uni-view[data-v-5dc044c1]:last-child{color:#ccc}.home-list-item>uni-view[data-v-5dc044c1]:first-child{font-size:%?32?%}",""])},"655a":function(e,t,n){"use strict";var i=n("4f52"),o=n.n(i);o.a},6702:function(e,t,n){"use strict";n.r(t);var i=n("13cc"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);t["default"]=o.a},"6cea":function(e,t,n){"use strict";var i,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticStyle:{margin:"30upx 0"}},[n("v-uni-view",{staticClass:"other-login u-f-ac"},[e._l(e.providerList,function(t,i){return[n("v-uni-view",{key:i+"_0",staticClass:"u-f-ajc u-f1",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.tologin(t)}}},[n("v-uni-view",{staticClass:"icon iconfont  u-f-ajc ",class:["icon-"+t.icon]})],1)]})],2),n("v-uni-view",{staticClass:"u-f-ajc",staticStyle:{padding:"10upx"}},[e._v("登录以查看更多内容")])],1)},a=[];n.d(t,"b",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return i})},"6e2a":function(e,t,n){"use strict";var i=n("63ff"),o=n.n(i);o.a},"70b1":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".other-login[data-v-0fb5ed75]{padding:%?20?% %?80?%}.other-login>uni-view>uni-view[data-v-0fb5ed75]{width:%?100?%;height:%?100?%;border-radius:100%;font-size:%?55?%;color:#fff}.other-login .icon-weixin[data-v-0fb5ed75]{background:#28de98}.other-login .icon-xinlangweibo[data-v-0fb5ed75]{background:#fc7729}.other-login .icon-QQ[data-v-0fb5ed75]{background:#2caefc}",""])},7420:function(e,t,n){"use strict";var i=n("c47f"),o=n.n(i);o.a},"7ca7":function(e,t,n){var i=n("651c");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("4f06").default;o("80f76d6e",i,!0,{sourceMap:!1,shadowMode:!1})},"82c9":function(e,t,n){"use strict";n.r(t);var i=n("1f16"),o=n("f18c");for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);n("fd70");var r,s=n("f0c5"),c=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"4ff28351",null,!1,i["a"],r);t["default"]=c.exports},9100:function(e,t,n){"use strict";n.r(t);var i=n("2a3d"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);t["default"]=o.a},a4c1:function(e,t,n){"use strict";var i=n("7ca7"),o=n.n(i);o.a},b43e:function(e,t,n){"use strict";n.r(t);var i=n("ccc5"),o=n("1893");for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);n("655a");var r,s=n("f0c5"),c=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"4285324e",null,!1,i["a"],r);t["default"]=c.exports},bb0e:function(e,t,n){"use strict";n.r(t);var i=n("eefb"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);t["default"]=o.a},c47f:function(e,t,n){var i=n("70b1");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("4f06").default;o("20fce94b",i,!0,{sourceMap:!1,shadowMode:!1})},cc43:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".home-info[data-v-4285324e]{padding:%?20?%;border-bottom:%?1?% solid #ccc}.home-info-hover[data-v-4285324e]{background:#ccc}.home-info>uni-view[data-v-4285324e]:last-of-type{height:100%;width:%?70?%;color:#ccc}.home-info>uni-view:first-child>uni-view[data-v-4285324e]:first-child{font-size:%?40?%!important}.home-info>uni-image[data-v-4285324e]{-webkit-flex-shrink:0;flex-shrink:0;width:%?100?%;height:%?100?%;border-radius:100%;margin-right:%?20?%}",""])},ccc5:function(e,t,n){"use strict";var i,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"u-f-ac home-info",attrs:{"hover-class":"home-info-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toUserSpace.apply(void 0,arguments)}}},[n("v-uni-image",{attrs:{src:e.homeInfo.userPic,mode:"widthFix","lazy-load":!0}}),n("v-uni-view",{staticClass:"u-f1"},[n("v-uni-view",{staticStyle:{"font-size":"37upx"}},[e._v(e._s(e.homeInfo.userName))]),n("v-uni-view",{staticStyle:{color:"#C0C0C0"}},[e._v("今日访客"+e._s(e.homeInfo.todayVistor)+"  总访客"+e._s(e.homeInfo.totalVistor))])],1),n("v-uni-view",{staticClass:"icon iconfont icon-jinru"})],1)},a=[];n.d(t,"b",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return i})},d58a:function(e,t,n){"use strict";n.r(t);var i=n("1b0e"),o=n("6702");for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);n("6e2a");var r,s=n("f0c5"),c=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"4e0704b8",null,!1,i["a"],r);t["default"]=c.exports},de53:function(e,t,n){"use strict";var i,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"home-list-item u-f-jsb u-f-ac",attrs:{"hover-class":"home-list-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clickEven.apply(void 0,arguments)}}},[e.item.icon?n("v-uni-view",{staticClass:"icon iconfont",class:["icon-"+e.item.icon]}):e._e(),e._v(e._s(e.item.name)),n("v-uni-view",{staticClass:"icon iconfont",class:{"icon-jinru":!e.item.data}},[e._v(e._s(e.item.data||""))])],1)},a=[];n.d(t,"b",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return i})},e1ee:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={props:{homeInfo:Object},methods:{toUserSpace:function(){console.log(this.homeInfo.id),this.User.navigate({url:"../../pages/user-space/user-space?userid="+this.homeInfo.id})}}};t.default=i},e45c:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".home-data[data-v-4ff28351]{padding:%?20?% %?80?%}.home-data>uni-view[data-v-4ff28351]{color:#989898}.home-data>uni-view>uni-view[data-v-4ff28351]{font-size:%?36?%;color:#000!important;font-weight:700}",""])},eaca:function(e,t,n){var i=n("e45c");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("4f06").default;o("542715f4",i,!0,{sourceMap:!1,shadowMode:!1})},eefb:function(e,t,n){"use strict";var i=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("5176")),a=i(n("f499"));n("96cf");var r=i(n("3b8d")),s=i(n("768b")),c={props:{noback:{type:Boolean,default:!0}},data:function(){return{providerList:[]}},methods:{mpGetUserInfo:function(e){var t=this;if(uni.showLoading({title:"登录中...",mask:!0}),"getUserInfo:ok"!==e.detail.errMsg)return uni.hideLoading(),void uni.showModal({title:"获取用户信息失败",content:"错误原因"+e.detail.errMsg,showCancel:!1});var n=e.detail.userInfo;uni.login({provider:"weixin",success:function(e){t.MpLogin({url:"/wxlogin",code:e.code,nickName:n.nickName,avatarUrl:n.avatarUrl})},complete:function(){uni.hideLoading()}})},MpLogin:function(e){var t=this;this.$http.post(e.url,{code:e.code,nickName:e.nickName,avatarUrl:e.avatarUrl}).then(function(e){var n=(0,s.default)(e,2),i=n[0],o=n[1];if(!t.$http.errorCheck(i,o))return!1;console.log("微信登录成功返回信息"),console.log(o.data.data),t.User.token=o.data.data.token,t.User.userinfo=t.User.__formatUserinfo(o.data.data),uni.setStorageSync("userinfo",t.User.userinfo),uni.setStorageSync("token",t.User.token),t.User.userinfo.id&&t.User.getCounts(),uni.showToast({title:"登录成功"}),t.$emit("logining"),t.noback||uni.reLaunch({url:"/pages/me/me"})})},loginEvent:function(){var e=(0,r.default)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.User.login({url:"user/otherlogin",data:t,Noback:this.noback});case 2:n=e.sent,n&&this.$emit("logining");case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),tologin:function(e){var t=this;uni.login({provider:e.id,success:function(n){uni.showLoading({title:"登陆中...",mask:!1}),console.log("登录成功返回信息"),console.log((0,a.default)(n)),console.log("login success:",n),console.log("登录成功 保存到本地 修改当前登录状态"),uni.getUserInfo({provider:e.id,success:function(i){console.log((0,a.default)(i.userInfo));var r=t.User.__formatOtherLogin(e.id,(0,o.default)(i,n));t.loginEvent(r)}}),console.log("登录成功，保存到本地存储，修改当前用户登录状态")},fail:function(e){console.log("login fail:",e)},complete:function(){uni.hideLoading()}})},getLoadingAuth:function(){var e=this;uni.getProvider({service:"oauth",success:function(t){e.providerList=t.provider.map(function(e){var t="",n="";switch(e){case"weixin":t="微信登录",n="weixin";break;case"qq":t="QQ登录",n="QQ";break;case"sinaweibo":t="新浪微博登录",n="xinlangweibo";break;case"xiaomi":t="小米登录",n="gengduo";break;case"alipay":t="支付宝登录",n="gengduo";break;case"baidu":t="百度登录",n="gengduo";break;case"toutiao":t="头条登录",n="gengduo";break;case"apple":t="苹果登录",n="gengduo";break}return{name:t,icon:n,id:e}})},fail:function(e){console.log("获取登录通道失败",e)}})}},created:function(){this.getLoadingAuth()}};t.default=c},f18c:function(e,t,n){"use strict";n.r(t);var i=n("52a8"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);t["default"]=o.a},f57f:function(e,t,n){"use strict";n.r(t);var i=n("6cea"),o=n("bb0e");for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);n("7420");var r,s=n("f0c5"),c=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"0fb5ed75",null,!1,i["a"],r);t["default"]=c.exports},fd70:function(e,t,n){"use strict";var i=n("eaca"),o=n.n(i);o.a}}]);